# 42 - 云平台部署需求

> **版本**: v1.0
> **最后更新**: 2026-01-29
> **依赖文档**: 41-Docker部署需求
> **后续文档**: 43-监控告警需求

---

## 1. 需求概述

实现**云平台部署支持**，包括 AWS、GCP、Fly.io 等。

**核心目标:**
- **多平台**: 支持主流云平台
- **自动化**: CI/CD 自动部署
- **扩展性**: 水平扩展支持

---

## 2. Fly.io 部署

### 2.1 配置文件

```toml
# fly.toml
app = "moltbot"

[build]
  dockerfile = "Dockerfile"

[[services]]
  internal_port = 8080
  protocol = "tcp"

  [[services.ports]]
    port = 80
    handlers = ["http"]

  [[services.ports]]
    port = 443
    handlers = ["tls", "http"]
```

### 2.2 部署命令

```bash
fly deploy
fly secrets set ANTHROPIC_API_KEY=sk-xxx
```

---

## 3. AWS ECS 部署

```json
{
  "family": "moltbot",
  "containerDefinitions": [
    {
      "name": "moltbot",
      "image": "moltbot:latest",
      "portMappings": [
        {
          "containerPort": 8080,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "NODE_ENV",
          "value": "production"
        }
      ]
    }
  ]
}
```

---

**文档完成** ✅
